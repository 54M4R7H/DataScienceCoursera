{
    "contents" : "# =================================================================================================\n# Description: Assignment 3 - rankall.R \n#              The function called rankall takes two arguments: an outcome name (outcome) and a \n#              hospital ranking (num). The function reads the outcome-of-care-measures.csv file \n#              and returns a 2-column data frame containing the hospital in each state that has the \n#              ranking specified in num.\n# \n# Parameter:   outcome - (e.g. \"heart attack\")\n#              num     - ranking of Hospital\n#                         \n# return:      a 2-column data frame containing the hospital in each state that has the \n#              ranking specified in num.\n#\n#\n# Authhor:     Bruno Hunkeler \n# Date:        13.11.2015\n# =================================================================================================\n\n# references to functions\n# source(\"best.R\")\n\n# library references \n# library(miscTools)\n\nrankall <- function(outcome, num = \"best\") {\n\n  # used for test purposes\n  # outcome <- \"heart failure\"\n  # num = 5\n  \n  # Map all valid outcomes to relevant mortality rate colname in data file\n  validOutcomes = list(\"heart attack\" = \"Hospital.30.Day.Death..Mortality..Rates.from.Heart.Attack\",\n                       \"heart failure\" = \"Hospital.30.Day.Death..Mortality..Rates.from.Heart.Failure\",\n                       \"pneumonia\" = \"Hospital.30.Day.Death..Mortality..Rates.from.Pneumonia\")\n  \n  # Load data \n  data <- read.csv(\"outcome-of-care-measures.csv\", colClasses = \"character\")\n  hosp <- data[, c(\"Hospital.Name\", \"State\", validOutcomes[[outcome]])]\n  \n  # assign new names to columns\n  names(hosp) <- c(\"hospital\", \"state\", \"rate\")\n  hosp[, 3] <- as.numeric(hosp[, 3])\n  \n  # find rows with AN's and remove them  \n  good <- complete.cases(hosp)\n  hosp <- hosp[complete.cases(hosp), ]  \n  \n  splitted <- split(hosp, hosp$state)\n  hospitals <- data.frame()\n  \n  for (dat in splitted) {\n\n     # order the Names prior to the Rates increasingly \n     datName <- dat[order(dat$hospital, decreasing = FALSE), ]\n     dat <- datName[order(datName$rate, decreasing = FALSE), ]\n     \n    if (num == \"best\") {\n      \n      hospitals <- rbind(hospitals, dat[1, ])\n    } else if (num == \"worst\") {\n      \n      hospitals <- rbind(hospitals,dat[nrow(dat), ])\n    } else {\n      \n      if ( !is.na(dat[as.numeric(num), ]$hospital) ){\n        \n        hospitals <- rbind(hospitals,dat[as.numeric(num), ])  \n      } else{\n        \n        hospitals <- rbind(hospitals, data.frame(hospital = NA, state = dat[1, \"state\"], rate = NA))\n      }\n      \n      \n    }\n  }\n  \n  # Return a data frame with the hospital names and the abrreviated state name\n  hospitals <- hospitals[, c(\"hospital\", \"state\")]\n}\n",
    "created" : 1447508842444.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1288967379",
    "id" : "9EC4308F",
    "lastKnownWriteTime" : 1447509654,
    "path" : "C:/Users/bhunkeler/OneDrive/Dokumente/Coursera_Courses/Data Science/002_R Programming/Week 4/Assignment_3/rankall.R",
    "project_path" : "rankall.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "type" : "r_source"
}